# Sui Swap Example

## Requirements

This is a Sui Move sample project for teaching purposes. The client is a Web3 developer education institution, and the requirements are brief:

> Build a Simple Token Swap dApp using Sui Move
>
> **Overview**: We are creating a basic dApp to allow users to trade one cryptocurrency for another on the Sui blockchain. We need two main components: a smart contract and a simple frontend.
>
> * The token swap dApp contract should be straightforward, focusing only on the swapping feature. We don't need the other DEX features.
> * The smart contract code must include comments to explain how it works.
> * A basic frontend should be provided for users to interact with the dApp.

Let's further clarify the requirements so that we can better determine the workload in the next step.

From the front-end, the dApp would look roughly like this:

* First we would display a list of supported token pairs, TokenX-TokenY, TokenY-TokenZ and so on. Of course, at first, this list is empty.

* ~~Users~~Only admin can "initialize liquidity". i.e. add a new swappable token pair TokenX-TokenY, by providing some amount of TokenX and TokenY.

* Of course, after the token pair is initialized, users can continue to "add liquidity" to the token pair.

* The front-end displays the current account's share of liquidity in the current token pair where appropriate. Of course, at this point the user should already have connected a wallet.

* The front-end has a place to show the "token reserves" in a token pair. That is, the amount of TokenX and TokenY are in the pair TokenX-TokenY.

* For already supported token pair, e.g. TokenX-TokenY, user can "swap" TokenX for TokenY, or vice versa. A fee of 0.3% will be charged for each transaction.

* Users can "remove liquidity". This means that by destroying their share of TokenX-TokenY liquidity, they can get a certain amount of TokenX and TokenY back.

* The revenue that the user receives for providing liquidity comes from the fee and nothing else.

From a front-end UX perspective, the main features are those above.

The internal implementation of the smart contract will be kept as simple as possible, as long as it is sufficient to illustrate the basic principles of the DEX using the AMM model.

Here, let's try to develop it using the [dddappp](https://www.dddappp.org) low-code tool.

## Prerequisites

Currently, the dddappp low-code tool is published as a Docker image for developers to experience.

So before getting started, you need to:

* Install [Sui](https://docs.sui.io/build/install).

* Install [Docker](https://docs.docker.com/engine/install/).

* (Optional) Install MySQL database server if you want to test the off-chain service. The off-chain service generated by the tool currently use MySQL by default.

* (Optional) Install JDK and Maven if you want to test the off-chain service. The off-chain services generated by the tool currently use Java.

If you have already installed Docker, you can use Docker to run a MySQL database service. For example:

```shell
sudo docker run -p 3306:3306 --name mysql \
-v ~/docker/mysql/conf:/etc/mysql \
-v ~/docker/mysql/logs:/var/log/mysql \
-v ~/docker/mysql/data:/var/lib/mysql \
-e MYSQL_ROOT_PASSWORD=123456 \
-d mysql:5.7
```

## Programming

### Write DDDML model file

In the `dddml` directory in the root of the repository, create a DDDML file like [this](./dddml/swap.yaml).

It's worth noting that in the current version of the `nft` branch, 
the `LiquidityToken` degenerates into a "capability" object. 
We use it to control access to "add liquidity" and "remove liquidity".
The account that owns it can be thought of as the owner of the `TokenPair` (pool).

> **Tip**
>
> About DDDML, here is an introductory article: ["Introducing DDDML: The Key to Low-Code Development for Decentralized Applications"](https://github.com/wubuku/Dapp-LCDP-Demo/blob/main/IntroducingDDDML.md).

### Run dddappp project creation tool

#### Update dddappp Docker image

Since the dddappp v0.0.1 image is updated frequently, you may be required to manually delete the image and pull it again before `docker run`.

```shell
# If you have already run it, you may need to Clean Up Exited Docker Containers first
docker rm $(docker ps -aq --filter "ancestor=wubuku/dddappp:0.0.1")
# remove the image
docker image rm wubuku/dddappp:0.0.1
# pull the image
git pull wubuku/dddappp:0.0.1
```

---

In repository root directory, run:

```shell
docker run \
-v .:/myapp \
wubuku/dddappp:0.0.1 \
--dddmlDirectoryPath /myapp/dddml \
--boundedContextName Test.SuiSwapExample \
--suiMoveProjectDirectoryPath /myapp/sui-contracts/core \
--boundedContextSuiPackageName sui_swap_example \
--boundedContextJavaPackageName org.test.suiswapexample \
--javaProjectsDirectoryPath /myapp/sui-java-service \
--javaProjectNamePrefix suiswapexample \
--pomGroupId test.suiswapexample
```

The command parameters above are straightforward:

* This line `-v .:/myapp \` indicates mounting the local current directory into the `/myapp` directory inside the container.
* `dddmlDirectoryPath` is the directory where the DDDML model files are located. It should be a directory path that can be read in the container.
* Understand the value of the `boundedContextName` parameter as the name of the application you want to develop. When the name has multiple parts, separate them with dots and use the PascalCase naming convention for each part. Bounded-context is a term in Domain-driven design (DDD) that refers to a specific problem domain scope that contains specific business boundaries, constraints, and language. If you cannot understand this concept for the time being, it is not a big deal.
* `boundedContextJavaPackageName` is the Java package name of the off-chain service. According to Java naming conventions, it should be all lowercase and the parts should be separated by dots.
* `boundedContextSuiPackageName` is the package name of the on-chain Sui contracts. According to the Sui development convention, it should be named in snake_case style with all lowercase letters.
* `javaProjectsDirectoryPath` is the directory path where the off-chain service code is placed. The off-chain service consists of multiple modules (projects). It should be a readable and writable directory path in the container.
* `javaProjectNamePrefix` is the name prefix of each module of the off-chain service. It is recommended to use an all-lowercase name.
* `pomGroupId` is the GroupId of the off-chain service. We use Maven as the project management tool for off-chain service. It should be all lowercase and the parts should be separated by dots.
* `suiMoveProjectDirectoryPath` is the directory path where the on-chain Sui contract code is placed. It should be a readable and writable directory path in the container.

After the above command is successfully executed, two directories `sui-java-service` and `sui-contracts/core` should be added to the local current directory.


### Implementing business logic

The tool has generated some files with the suffix `_logic.move` in the directory `sui-contracts/core/sources`.

Generally, these files contain the scaffolding code of functions that implement business logic,
namely the signature part of the functions.
You just need to fill in the implementation part of the functions.

[TBD]

---

In [the model file](./dddml/swap.yaml), we defined some methods which use `Balance`, a resource type, as type of parameters or return values.
This makes these methods very combinable - as a developer of Move, a "resource-oriented programming" language,
you will already know this.

However, it's not easy to call them directly from clients.
So, we added this file [token_pair_service.move](sui-contracts/core/sources/token_pair_service.move).
In this file, some entry functions are provided to facilitate clients to use the corresponding features directly.

That's the whole programming routine, isn't it simple?

## Test Application

### Some preparations might be needed

#### Prepare some SUI coins

View the SUI coin objects in the current account:

```shell
sui client gas
```

If you have only one SUI coin object in your account, you can transfer some SUI to your account first to split this SUI coin object.
In the following test, we need to use a SUI coin object to add liquidity in addition to a SUI coin object to pay gas fee:

```shell
sui client pay-sui --input-coins 0x79e6fd15db671bdf426166a494f15845353701c742febb66e88fb61a4981a5d1 --amounts 1000000000 \
--recipients 0xfc50aa2363f3b3c5d80631cae512ec51a8ba94080500a981f4ae1a2ce4d201c2 --gas-budget 30000000
```

#### Mint some Movescription tokens

We will have deployed a movescription test contract on testnet with package ID: `0xf4090a30c92074412c3004906c3c3e14a9d353ad84008ac2c23ae402ee80a6ff`.

Object ID of the `TickRecord` used to mint the `MOVE` inscription: `0x34fccc1a953d02f3a7ddbd546e7982aff89c6989c8181d34e788bd855cb6ff64`.

Note that when testing with the Sui CLI, switch the environment to testnet first:

```shell
sui client switch --env testnet
```

Mint some test inscriptions (please allow one minute between each mint),
Note that the third parameter, `0x44e677e7fbfebef80d484eca63e350a1e8d9d5da4ab5a1e757d7e22a2d0a7b2c` 
in the example below should be changed to the ID of one of your SUI Coin objects.

```shell
sui client call --package 0xf4090a30c92074412c3004906c3c3e14a9d353ad84008ac2c23ae402ee80a6ff --module movescription --function mint --args 0x34fccc1a953d02f3a7ddbd546e7982aff89c6989c8181d34e788bd855cb6ff64 \"MOVE\" 0x44e677e7fbfebef80d484eca63e350a1e8d9d5da4ab5a1e757d7e22a2d0a7b2c \"0x6\" --gas-budget 19000000
```

Maybe you want to quickly make some more inscription objects for testing, then, you can split an inscription object like this:

```shell
sui client call --package 0xf4090a30c92074412c3004906c3c3e14a9d353ad84008ac2c23ae402ee80a6ff --module movescription --function split --args  0xfc8debdede996da1901ec9090ac8d6cda8478705f6c8bad64056b540ff6b4f8c '"1000"' --gas-budget 19000000
```

### Deploy contracts

#### Deploy core project

Execute the following command in the directory `sui-contracts/core` to publish the `core` project on chain:

```shell
sui client publish --gas-budget 900000000 --skip-fetch-latest-git-deps  --skip-dependency-verification
```

If the command is executed successfully, the transaction digest of this publication will be output. For example:

```text
Transaction Digest: 7FKfG2tBrvWNtVz92orznEcLZ5bfazh6RgAnWA36wLQ2
```

Take note of this transaction digest, for example, `7FKfG2tBrvWNtVz92orznEcLZ5bfazh6RgAnWA36wLQ2`.
When setting up the off-chain service, we will need it.

For the next tests, we assume the deployed `core` package ID:

```text
│ Published Objects:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            │
│  ┌──                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          │
│  │ PackageID: 0xf832b7f9d47e64f08347637fd0a4864486248c266c405f9db18541722b4cb78a
```

Record information about a number of objects created at the time of publishing. 
We use the following object IDs for the next tests:

```text
ObjectID: 0x3db8563b55e65fadd54b39cf77b4d8557ec8551c6a57aad1fdc422e22af9afd5
ObjectType: 0xf832b7f9d47e64f08347637fd0a4864486248c266c405f9db18541722b4cb78a::nft_service_config::NftServiceConfig

ObjectID: 0xcb650506407f471750f2fc044cca6ba7290ff79d736e2400a1afb00a1aff754b
ObjectType: 0xf832b7f9d47e64f08347637fd0a4864486248c266c405f9db18541722b4cb78a::nft_service_config::NftServiceConfigCap

ObjectID: 0x2c8836fd37c0d1ff64f48df7196c3ff6ccb6a589af80c9f80103d960c7d5ded7
ObjectType: 0x2::package::Publisher

ObjectID: 0x803774f23af3dcfdbc6da99ccfec9932a2a80c6fa4720183c95e46f425469f14
ObjectType: 0x2::package::Publisher
```

Modify `sui-contracts/core/Move.toml`:

```toml
[package]
published-at = "0xf832b7f9d47e64f08347637fd0a4864486248c266c405f9db18541722b4cb78a"

[addresses]
sui_swap_example = "0xf832b7f9d47e64f08347637fd0a4864486248c266c405f9db18541722b4cb78a"
```

#### Deploy "nft-service-impl" project

Under the directory `sui-contracts/nft-service-impl`, publish the contract:

```shell
sui client publish --gas-budget 900000000 --skip-fetch-latest-git-deps  --skip-dependency-verification
```

Record the following information:

```text
Transaction Digest: 5RG5qwGifKWahtqPrDx2Qg5RkqMnFtoiaR8yi93rtxqR

│ Published Objects:                                                                               │
│  ┌──                                                                                             │
│  │ PackageID: 0x04267e947c0e3ba12a1882aa2b6da72544b680a526e8a1835fc36969f5aaa357                 │
```

Modify the file `/sui-contracts/nft-service-impl/Move.toml`:

```text
[package]
published-at = "0x04267e947c0e3ba12a1882aa2b6da72544b680a526e8a1835fc36969f5aaa357"

[addresses]
nft_service_impl = "0x04267e947c0e3ba12a1882aa2b6da72544b680a526e8a1835fc36969f5aaa357"
```

#### Deploy "di" project

Execute the following command in the directory `sui-contracts/di` to publish the `di` project on chain:

```shell
sui client publish --gas-budget 900000000 --skip-fetch-latest-git-deps  --skip-dependency-verification
```

Record the following information:

```text
Transaction Digest: CK5P6fups8RruCbtfw6tpKkPGgCwLHXjSzPta5tSYrDV

│ Published Objects:                                                                               │
│  ┌──                                                                                             │
│  │ PackageID: 0xc56aa87c117948ec3971d154fa2d0e4e737fe9181124d0a44cf7aa10bfaac97b                 │
```

#### Configure dependency injection allowlist

Execute the following:

```shell
sui client call --function add_allowed_impl --module nft_service_config --package 0xf832b7f9d47e64f08347637fd0a4864486248c266c405f9db18541722b4cb78a \
--type-args '0x04267e947c0e3ba12a1882aa2b6da72544b680a526e8a1835fc36969f5aaa357::movescription_service_impl::MovescriptionServiceImpl' \
--args 0x3db8563b55e65fadd54b39cf77b4d8557ec8551c6a57aad1fdc422e22af9afd5 0xcb650506407f471750f2fc044cca6ba7290ff79d736e2400a1afb00a1aff754b \
--gas-budget 300000000
```

### Initialize liquidity

Note the arguments required by the "initialize liquidity" function, which are assumed by the following commands:

* `_nft_service_config: &NftServiceConfig`: `0x3db8563b55e65fadd54b39cf77b4d8557ec8551c6a57aad1fdc422e22af9afd5`.
* `exchange: &mut Exchange`: Assuming the ID of the `Exchange` object is `0xd2ad25be6c16eea1964514495531f7ebf77528231034a4a17b155e8f6e3a006f`. 
* `x: Movescription`: The ID of the `Movescription` object is `0x64022f999e712554af253ddbfb402c42c60086b0da38ea7806fb214e4193ab32`.
* `y_coin: Coin<Y>`: SUI coin object ID is `0x2d5aa8072b01f29fe074d4d0be89a33ebc4c4d63b6fc3bd0b611fde655a703e0`.
* `y_amount: u64`: `1000000`.

So, the command that needs to be executed is similar to the following:

```shell
sui client call --package 0xc56aa87c117948ec3971d154fa2d0e4e737fe9181124d0a44cf7aa10bfaac97b --module movescription_swap_service --function initialize_liquidity \
--type-args '0x2::sui::SUI' \
--args \
'0x3db8563b55e65fadd54b39cf77b4d8557ec8551c6a57aad1fdc422e22af9afd5' \
'0xd2ad25be6c16eea1964514495531f7ebf77528231034a4a17b155e8f6e3a006f' \
'0x64022f999e712554af253ddbfb402c42c60086b0da38ea7806fb214e4193ab32' \
'0x2d5aa8072b01f29fe074d4d0be89a33ebc4c4d63b6fc3bd0b611fde655a703e0' \
'"1000000"' \
--gas-budget 100000000
```

Note the ID of the output `TokenPair` object (we need to use it when adding liquidity):

```text
│  │ ObjectID: 0x99a33d5585eb8f8f00a0b2f3f1a8972ca8913cca9eee4c715e2101e4f201b3a2                                                   │
│  │ Sender: 0x...                                                                                                                  │
│  │ Owner: Shared                                                                                                                  │
│  │ ObjectType: 0x2301a3ea0ccba8d48360f1579c1f4ddfd976910b1c45919d9f2360d9294ae97::token_pair::TokenPair<...>                      │
```

Note the ID of the output `LiquidityToken` object:

```text
│  ┌──                                                                                               │
│  │ ObjectID: 0xd679ea5c132b81709cccb0032b0de832b72623079cddd0e208bac025e51ef70b                    │
│  │ Sender: 0xfc50aa2363f3b3c5d80631cae512ec51a8ba94080500a981f4ae1a2ce4d201c2                      │
│  │ Owner: Account Address ( 0xfc50aa2363f3b3c5d80631cae512ec51a8ba94080500a981f4ae1a2ce4d201c2 )   │
│  │ ObjectType: 0xf832b...::liquidity_token::LiquidityToken<...                                     │
```


### Add liquidity

Add liquidity:

```shell
sui client call --package 0xc56aa87c117948ec3971d154fa2d0e4e737fe9181124d0a44cf7aa10bfaac97b --module movescription_swap_service --function add_liquidity \
--type-args '0x2::sui::SUI' \
--args \
'0x3db8563b55e65fadd54b39cf77b4d8557ec8551c6a57aad1fdc422e22af9afd5' \
'0x99a33d5585eb8f8f00a0b2f3f1a8972ca8913cca9eee4c715e2101e4f201b3a2' \
'0xd679ea5c132b81709cccb0032b0de832b72623079cddd0e208bac025e51ef70b' \
'0x773eb42e42a5593fd5e2b2c1fda20853ba92a6a8390e24c24407ff5fe44ba128' \
'0x2d5aa8072b01f29fe074d4d0be89a33ebc4c4d63b6fc3bd0b611fde655a703e0' \
'"1000000"' \
--gas-budget 100000000
```

Note the ID of the `LiquidityToken` object in the output:

```text
│ Created Objects:                                                                                                                  │
│  ┌──                                                                                                                              │
│  │ ObjectID: 0x97ace24665dfe33478447494364fcc2dd6fc02185989bf6721d4a5a99bea1891                                                   │
│  │ Sender: 0x...                                                                                                                  │
│  │ Owner: Account Address ( 0x... )                                                                                               │
│  │ ObjectType: 0x2301a3ea0ccba8d48360f1579c1f4ddfd976910b1c45919d9f2360d9294ae97::liquidity_token::LiquidityToken<0x2::sui::SUI>  │
```

You can add liquidity multiple times, using one of the `LiquidityToken` objects to test removing liquidity.


### Remove liquidity

Remove liquidity, the following assumes that the ID of the `LiquidityToken` object you want to remove is `0x773eb42e42a5593fd5e2b2c1fda20853ba92a6a8390e24c24407ff5fe44ba128`:

```shell
sui client call --package 0xf832b7f9d47e64f08347637fd0a4864486248c266c405f9db18541722b4cb78a --module token_pair_service --function remove_liquidity \
--type-args '0xf4090a30c92074412c3004906c3c3e14a9d353ad84008ac2c23ae402ee80a6ff::movescription::Movescription' '0x2::sui::SUI' \
--args \
'0x99a33d5585eb8f8f00a0b2f3f1a8972ca8913cca9eee4c715e2101e4f201b3a2' \
'0xd679ea5c132b81709cccb0032b0de832b72623079cddd0e208bac025e51ef70b' \
'0x773eb42e42a5593fd5e2b2c1fda20853ba92a6a8390e24c24407ff5fe44ba128' \
'0x2d5aa8072b01f29fe074d4d0be89a33ebc4c4d63b6fc3bd0b611fde655a703e0' \
--gas-budget 100000000
```

### Swap tokens

#### Swap token X for token Y

Swap, to exchange Movescription Token  (i.e. Token X)  for Token Y.
The following assumes that the Movescription object ID is `0xc1873e4aaf9d31214a2c57ad0b23ea1750b3d22c23f3a6516f7c21fb97e25c9a`):

```shell
sui client call --package 0xc56aa87c117948ec3971d154fa2d0e4e737fe9181124d0a44cf7aa10bfaac97b --module movescription_swap_service --function swap_x \
--type-args '0x2::sui::SUI' \
--args \
'0x3db8563b55e65fadd54b39cf77b4d8557ec8551c6a57aad1fdc422e22af9afd5' \
'0x99a33d5585eb8f8f00a0b2f3f1a8972ca8913cca9eee4c715e2101e4f201b3a2' \
'0xc1873e4aaf9d31214a2c57ad0b23ea1750b3d22c23f3a6516f7c21fb97e25c9a' \
'0x2d5aa8072b01f29fe074d4d0be89a33ebc4c4d63b6fc3bd0b611fde655a703e0' \
'"100"' \
--gas-budget 100000000
```

#### Swap token Y for token X

In the opposite direction, Token Y is exchanged for Token X:

```shell
sui client call --package 0xf832b7f9d47e64f08347637fd0a4864486248c266c405f9db18541722b4cb78a --module token_pair_service --function swap_y \
--type-args '0xf4090a30c92074412c3004906c3c3e14a9d353ad84008ac2c23ae402ee80a6ff::movescription::Movescription' '0x2::sui::SUI' \
--args \
'0x99a33d5585eb8f8f00a0b2f3f1a8972ca8913cca9eee4c715e2101e4f201b3a2' \
'0x2d5aa8072b01f29fe074d4d0be89a33ebc4c4d63b6fc3bd0b611fde655a703e0' \
'"1000000"' \
'0x7cc9b7947c9a985f43e94926a38fdc33dc4ff0e2b2ea0be09f77f8ebb017c979' \
--gas-budget 100000000
```


### Test off-chain service

#### Configuring off-chain service

Open the `application-test.yml` file located in the directory `sui-java-service/suiswapexample-service-rest/src/main/resources` and set the published transaction digest.

After setting, it should look like this:

```yaml
sui:
  contract:
    jsonrpc:
      url: "https://fullnode.devnet.sui.io/"
    package-publish-transaction: "7FKfG2tBrvWNtVz92orznEcLZ5bfazh6RgAnWA36wLQ2"
```

This is the only place where off-chain service need to be configured, and it's that simple.


#### Creating a database for off-chain service

Use a MySQL client to connect to the local MySQL server and execute the following script to create an empty database (assuming the name is `test5`):

```sql
CREATE SCHEMA `test5` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_bin;
```

Go to the `sui-java-service` directory and package the Java project:

```shell
mvn package
```

Then, run a command-line tool to initialize the database:

```shell
java -jar ./suiswapexample-service-cli/target/suiswapexample-service-cli-0.0.1-SNAPSHOT.jar ddl -d "./scripts" -c "jdbc:mysql://127.0.0.1:3306/test5?enabledTLSProtocols=TLSv1.2&characterEncoding=utf8&serverTimezone=GMT%2b0&useLegacyDatetimeCode=false" -u root -p 123456
```

#### Starting off-chain service

In the `sui-java-service` directory, run the following command to start the off-chain service:

```shell
mvn -pl suiswapexample-service-rest -am spring-boot:run
```

### Off-chain service API

Our off-chain service pulls the state of objects on chain into an off-chain SQL database to provide query functionality.

We can certainly start by using Sui's official API service, see: https://docs.sui.io/references/sui-api

However, there are some application-specific query requirements that Sui's official API service may not be able to fulfill, 
so it should be necessary to build your own or use enhanced query or indexer services provided by third parties.

By default, the off-chain services we generate provide some out-of-the-box APIs. for example:

Get a list of token pairs:

```text
http://localhost:1023/api/TokenPairs
```

You can use query criteria:

```text
http://localhost:1023/api/TokenPairs?totalLiquidity=gt(100)&x_Reserve.tick=MOVE
```

Get the information of a token pair:

```text
http://localhost:1023/api/TokenPairs/0xe5bb0aa9fcd7ce57973bd3289f5b1ab0f946c47f3273641c3527a5d26775a5ac
```

Get a list of liquidity tokens:

```text
http://localhost:1023/api/LiquidityTokens
```

Get the information of a liquidity token:

```text
http://localhost:1023/api/LiquidityTokens/0x1c934038fbb356446add349062e9fad959820c5998c80f6f363969d07288cb16
```

#### Query parameters for getting lists

Query parameters that can be supported in the request URL for getting a list, including:

* `sort`: The name of the property to be used for sorting. Multiple names can be separated by commas. 
    A "-" in front of the name indicates reverse order. 
    The query parameter `sort` can appear multiple times, like this: `sort=fisrtName&sort=lastName,desc`.
* `fields`: The names of the fields (properties) to be returned. 
    Multiple names can be separated by commas.
* `filter`: The filter to return the result, explained further later (TBD).
* `firstResult`: The ordinal number of the first record returned in the result, starting from `0`.
* `maxResults`: The maximum number of records returned in the result.

#### Getting the list's page envelope

I personally don't like page "envelope", 
but because some developers requested it, 
we support sending a GET request to a URL to get a page envelope for the list:

```url
{BASE_URL}/{Entities}/_page?page={page}
```

Supported paging-related query parameters:

* `page`: Page number, starting from 0.
* `size`: Page size.

For example:

```text
http://localhost:1023/api/TokenPairs/_page?page=0&size=10
```

#### Need more query functionality?

Since the off-chain service already pulls the state of the objects on chain to the off-chain SQL database, 
we can query the off-chain service's database using any SQL query statement.
It is very easy to encapsulate these SQL query statements into an API. 
If you have such a need, modify the source code and add the API you need.


##  Further Reading

### Sui Crowdfunding Example

Another Sui Move sample project for teaching purposes. Repository: https://github.com/dddappp/sui-crowdfunding-example

You can refer to its README to refine the business logic of this project, as well as to test the application.

### Sui Blog Example

Repository: https://github.com/dddappp/sui-blog-example

It only requires 30 or so lines of code (all of which is a description of the domain model) to be written by the developer, and then generates a blog example that emulates [RoR Getting Started](https://guides.rubyonrails.org/getting_started.html) in one click, without requiring the developer to write a single line of other code.


### A More Complex Sui Demo

If you are interested, you can find a more complex Sui Demo here: ["A Sui Demo"](https://github.com/dddappp/A-Sui-Demo).


### Rooch Blog Example

Here is a Rooch version like above Sui blog example: https://github.com/rooch-network/rooch/blob/main/examples/blog/README.md

